<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <a href="index.html">index.html</a>
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1">

    <title>Hello World</title>

    <style>
      body {
        border: 1px solid black;
      }
    </style>

    <!-- Inline scripts are forbidden in Firefox OS apps (CSP restrictions),
         so we use a script file. -->
    <script src="appGalaxy.js" type="text/javascript" defer></script>
    <script src="galaxy_simulation.js" type="text/javascript" defer></script>
    <script src="galaxy_specrend.js" type="text/javascript" defer></script>
    <!--<script src="galaxy.js" type="text/javascript" defer></script>-->
    <script src="https://www.khronos.org/registry/webgl/sdk/demos/common/webgl-utils.js" type="text/javascript" defer></script>
    <script src="https://threejs.org/build/three.min.js" type="text/javascript"></script>
    <!--<script src="frag_shader.frag" id="shader-fs" type="x-shader/x-fragment"></script>
    <script src="vert_shader.vert" id="shader-vs" type="x-shader/x-vertex"></script>-->
    <script src="cubetest.js" type="text/javascript"></script>
    <script src="threeTest.js" type="text/javascript"></script>

      <script id="fragment-shader" type="x-shader/x-fragment">
          #version 300
          //star texture
          uniform sampler2D u_texture;
          //predicted color from black body
          varying mediump vec3 v_color;

          void main(){
          //amount of intensity from the grayscale star
          mediump float star_tex_intensity = texture2D(u_texture, gl_PointCoord).r;
          gl_FragColor = vec4(v_color * star_tex_intensity, 0.8);
          }
      </script>

      <script id="vertex-shader" type="x-shader/x-vertex">
          #version 300
          uniform mat4  u_model;
          uniform mat4  u_view;
          uniform mat4  u_projection;

          //sampler that maps [0, n] -> color according to blackbody law
          uniform sampler2D u_colormap;
          //index to sample the colormap at
          attribute float a_color_index;

          //size of the star
          attribute mediump float a_size;
          //type
          attribute float a_type;
          attribute vec2  a_position;
          //brightness of the star
          attribute mediump float a_brightness;

          varying mediump vec3 v_color;
          void main (void){
          gl_Position = u_projection * u_view * u_model * vec4(a_position, 0.0,1.0);

          //find base color according to physics from our sampler
          vec3 base_color;
          #ifdef VERTEX_TEXTURES
          base_color = texture2D(u_colormap, a_color_index).rgb;
          #else
          base_color = vec3(.5,.5,.5);
          #endif
          //scale it down according to brightness
          vec3 temp = base_color * a_brightness;

          if (a_size > 2.0) {
          gl_PointSize = a_size;
          } else {
          gl_PointSize = 0.0;
          }


          if (a_type == 2.0) {
          temp *= vec3(2, 1, 1);
          }
          else if (a_type == 3.0) {
          temp = vec3(.9);
          }
          v_color = temp;
          }
      </script>
</head>

  <body onload="start()">
      <!-- This code is in the public domain. Enjoy! -->
      <h2>Hello World</h2>
      <p></p>
      <br />
      <br />
      <div></div>
      <canvas id="glCanvas" width="512" height="512">
          Your browser doesn't appear to support the
          <code>&lt;canvas&gt;</code> element.
      </canvas>
  </body>

</html>
